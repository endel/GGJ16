!function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){t.exports={urls:["sound/music.ogg","sound/music.m4a","sound/music.mp3","sound/music.ac3"],sprite:{loop:[0,59112.01814058957],title_screen:[61e3,59112.01814058957]}}},{}],2:[function(e,t,n){t.exports={1:{velocity:1,efficiency:1},2:{velocity:2,efficiency:2}}},{}],3:[function(e,t,n){t.exports={urls:["sound/sound_effects.ogg","sound/sound_effects.m4a","sound/sound_effects.mp3","sound/sound_effects.ac3"],sprite:{GOD_Attack1_alt1:[0,987.437641723356],GOD_Attack1_alt2:[2e3,876.1678004535147],GOD_Attack1_alt3:[4e3,1972.2675736961453],GOD_Attack2_FINISH:[7e3,964.512471655329],GOD_Attack2_START:[9e3,855.8503401360547],GOD_FB__0MANAWarning:[11e3,869.5918367346937],GOD_FB__5PlusKillsAtOnce:[13e3,1837.7777777777774],GOD_FB__7PlusKillsAtOnce:[16e3,1498.9569160997717],GOD_FB__HighscoreObtained:[19e3,1213.922902494332],GOD_FB__NewPowerUnlocked:[22e3,1293.9909297052168],GOD_FB__NewWaveStarted:[25e3,950.181405895691],GOD_FB__NewWaveStarted2:[27e3,531.0204081632648],GOD_HitHuman_01:[29e3,644.1043083900233],GOD_HitHuman_02:[31e3,783.5374149659878],GOD_HitHuman_03:[33e3,336.7346938775526],GOD_HitHuman_04:[35e3,385.1247165532854],GOD_HitHuman_05:[37e3,1140.5668934240366],GOD_HitHuman_06:[4e4,377.50566893424065],GOD_HitHuman_07:[42e3,597.8911564625876],GOD_KilledHuman_01:[44e3,791.972789115647],GOD_KilledHuman_02:[46e3,517.4829931972766],GOD_KilledHuman_03:[48e3,790.0453514739212],GOD_KilledHuman_04:[5e4,594.5804988662146],GOD_KilledHuman_05:[52e3,734.8072562358254],GOD_KilledHuman_06:[54e3,830.544217687077],GOD_KilledHuman_07:[56e3,1352.9024943310687],GOD_KilledHuman_08:[59e3,888.684807256233],GOD_KilledHuman_09:[61e3,885.0113378684839],GOD_KilledHuman_10:[63e3,405.71428571428214],GOD_KilledHuman_11:[65e3,553.6281179138314],GOD_KilledHuman_12:[67e3,396.30385487528486],GOD_KilledHuman_13:[69e3,532.5170068027205],GOD_KilledHuman_14:[71e3,1064.6712018140647],Human_All_Walking_loop:[74e3,5008.707482993203],Human_Fem_HIT_01:[81e3,338.775510204087],Human_Fem_HIT_02:[83e3,858.1405895691603],Human_Fem_HIT_03:[85e3,1349.5011337868448],Human_Fem_HIT_04:[88e3,698.7301587301573],Human_Fem_ScreenEntrance:[9e4,1250.5895691609935],Human_Man_HIT_01:[93e3,406.16780045351675],Human_Man_HIT_02:[95e3,473.3786848072583],Human_Man_HIT_03:[97e3,426.5079365079316],Human_Man_HIT_04:[99e3,1090.1360544217623],Human_Man_HIT_05:[102e3,1036.5759637188175],Human_Man_HIT_06:[105e3,333.65079365079],Human_Man_HIT_07:[107e3,355.4875283446677],Human_Man_HIT_08:[109e3,313.65079365079396],Human_Man_HIT_09:[111e3,424.9433106575964],Human_Man_KILL_01:[113e3,1058.0272108843474],Human_Man_KILL_02:[116e3,627.5510204081627],Human_Man_KILL_03:[118e3,594.5351473922926],UI_Button:[12e4,357.1428571428612],gameover:[122e3,3496.780045351471]}}},{}],4:[function(e,t,n){t.exports={2:{slots:3,intervals:[{prayerType:1,destinationSlot:0,time:0,amount:1,trajectory:0},{prayerType:2,destinationSlot:1,time:1,amount:1,trajectory:0},{prayerType:1,destinationSlot:2,time:2,amount:1,trajectory:0}]},1:{delay:2,slots:5,intervals:[{prayerType:1,destinationSlot:0,time:0,amount:1,trajectory:0},{prayerType:2,destinationSlot:1,time:1,amount:1,trajectory:0},{prayerType:1,destinationSlot:2,time:2,amount:1,trajectory:0}]},3:{delay:3,slots:5,intervals:[{prayerType:1,destinationSlot:0,time:0,amount:1,trajectory:0},{prayerType:2,destinationSlot:1,time:1,amount:1,trajectory:0},{prayerType:1,destinationSlot:2,time:2,amount:1,trajectory:0}]}}},{}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("behaviour.js"),s=e("./core/SceneManager"),u=i(s),l=e("clock-timer.js"),c=i(l),h=e("tweener"),p=i(h);window.clock=new c["default"],window.Tweener=p["default"],window.tweener=new p["default"],window.SCALE_RATIO=1;var f=function(){function e(){o(this,e),this.tmpBackground=new PIXI.Sprite.fromImage("images/background.png");var t=window.innerHeight/this.tmpBackground.height,n=this.tmpBackground.width*t,i=this.tmpBackground.height*t;SCALE_RATIO=t,this.renderer=new PIXI.WebGLRenderer(n,i,{}),this.renderer.backgroundColor=16777215,document.body.appendChild(this.renderer.view),this.sceneManager=new u["default"](t),this.renderer.view.width=n,this.renderer.view.height=i,this.componentSystem=(0,a.createComponentSystem)(PIXI.DisplayObject)}return r(e,[{key:"gotoScene",value:function(e){this.sceneManager.goTo(e)}},{key:"update",value:function(){window.requestAnimationFrame(this.update.bind(this)),clock.tick(),tweener.update(clock.deltaTime),this.componentSystem.update(),this.renderer.render(this.sceneManager)}},{key:"width",get:function(){return this.tmpBackground.width}},{key:"height",get:function(){return this.tmpBackground.height}}]),e}();n["default"]=f},{"./core/SceneManager":12,"behaviour.js":30,"clock-timer.js":31,tweener:36}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("behaviour.js"),l=e("../../entities/Prayer"),c=i(l),h=e("../entities/PrayerBehaviour"),p=i(h),f=e("../../../config/waves.json"),d=function(e){function t(){return o(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"onAttach",value:function(e){this.currentWave=1,this.activePrayers=0,this.god=e.god,this.prayers=[],this.progress=e.progress,this.on("start",this.onStart.bind(this)),this.emit("start")}},{key:"onStart",value:function(){var e=this.waveConfig.intervals.length;this.object.slots=this.waveConfig.slots;for(var t=0;e>t;t++)for(var n=this.waveConfig.intervals[t],i=this.waveConfig.intervals[t].time.toString().split(","),o=0;o<n.amount;o++)clock.setTimeout(this.spawn.bind(this,n),1e3*(i[o]||i[0]))}},{key:"gotoNextWave",value:function(){this.currentWave<Object.keys(f).length-1&&(this.currentWave++,playSound(["GOD_FB__NewWaveStarted","GOD_FB__NewWaveStarted2"])),console.log("Current wave:",this.currentWave),this.emit("start")}},{key:"spawn",value:function(e){"undefined"==typeof e.slotIndex;var t=new c["default"](e.prayerType),n=this.object.slots[e.destinationSlot],i=Math.atan2(n.y-this.object.stone.y,n.x-this.object.stone.x);t.behaviour=new p["default"],t.interactive=!0,t.on("click",this.onAction.bind(this,t)),this.object.addChild(t),t.addBehaviour(t.behaviour,{type:e.prayerType,targetSlot:n,angle:i},this),t.behaviour.on("detach",this.onPrayerKilled.bind(this,t)),this.activePrayers++}},{key:"onAction",value:function(e,t){this.god.getEntity().emit("action",e,t.data.global),console.log("Action!",e)}},{key:"onPrayerKilled",value:function(){this.activePrayers--,0===this.activePrayers&&clock.setTimeout(this.gotoNextWave.bind(this),1e3*(this.nextWaveConfig.delay||0))}},{key:"update",value:function(){for(var e=0,t=0;t<this.prayers.length;t++)e+=this.prayers[t].attributes.efficiency;0===e&&(e=-.1),this.progress.progress+=e/1e3}},{key:"onDetach",value:function(){}},{key:"nextWaveConfig",get:function(){var e=this.currentWave===Object.keys(f).length-1?this.currentWave:this.currentWave+1;return f[e]}},{key:"waveConfig",get:function(){return f[this.currentWave]}}]),t}(u.Behaviour);n["default"]=d},{"../../../config/waves.json":4,"../../entities/Prayer":14,"../entities/PrayerBehaviour":8,"behaviour.js":30}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("behaviour.js"),l=e("../../entities/Prayer"),c=i(l),h=e("../../entities/Thunder"),p=i(h),f=function(e){function t(){return o(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"onAttach",value:function(e){this.waveController=e.waveController,this.action1=e.action1,this.action2=e.action2,this.interval=clock.setInterval(this.checkStatus.bind(this),1e3),this.on("action",this.onAction.bind(this))}},{key:"onAction",value:function(e,t){if(this.action1.isAvailable){playSound(["GOD_Attack1_alt1","GOD_Attack1_alt2","GOD_Attack1_alt3"]),playSound(["GOD_KilledHuman_01","GOD_KilledHuman_02","GOD_KilledHuman_03","GOD_KilledHuman_04","GOD_KilledHuman_05","GOD_KilledHuman_06","GOD_KilledHuman_07","GOD_KilledHuman_08","GOD_KilledHuman_09","GOD_KilledHuman_10","GOD_KilledHuman_11","GOD_KilledHuman_12","GOD_KilledHuman_13","GOD_KilledHuman_14"]),this.action1.getEntity().emit("use");var n=new p["default"];if(e instanceof c["default"])e.behaviour.detach(),n.x=e.x,n.y=e.y;else for(var i=0;i<e.prayers.length;i++)e.prayers[i].detach(),n.x=e.prayers[i].x,n.y=e.prayers[i].y;n.x=e.x,n.y=e.y,this.object.parent.addChild(n),this.object.rotation=0,this.object.setFace("attack"),this.interval.elapsedTime=0,tweener.remove(this.object),tweener.add(this.object).to({rotation:.1},500,Tweener.ease.quintOut).to({rotation:0},200,Tweener.ease.quintOut)}else{playSound("GOD_FB__0MANAWarning");var o=parseInt(this.action1.x);tweener.add(this.action1).to({x:o+10},80,Tweener.ease.quintOut).to({x:o-10},80,Tweener.ease.quintOut).to({x:o+10},80,Tweener.ease.quintOut).to({x:o-10},80,Tweener.ease.quintOut).to({x:o},80,Tweener.ease.quintOut)}}},{key:"checkStatus",value:function(){this.waveController.prayers.length>0&&"attack"!==this.object.currentFace?(this.object.setFace("damage"),tweener.add(this.object).to({rotation:-.1},500,Tweener.ease.bounceOut).to({rotation:0},200,Tweener.ease.quintOut)):this.object.setFace("serious")}},{key:"update",value:function(){}},{key:"onDetach",value:function(){this.interval.clear()}}]),t}(u.Behaviour);n["default"]=f},{"../../entities/Prayer":14,"../../entities/Thunder":17,"behaviour.js":30}],8:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("behaviour.js"),l=e("../particles/Explosion"),c=i(l),h=e("../../entities/effects/Blood"),p=i(h),f=e("../../../config/prayers.json"),d=function(e){function t(){return o(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"onAttach",value:function(e,t){this.waveController=t,this.attributes=f[e.type],this.targetSlot=e.targetSlot,this.angle=e.angle,this.praying=!1,this.originPoint={x:this.targetSlot.x+200*Math.cos(this.angle),y:this.targetSlot.y+200*Math.sin(this.angle)},this.object.x=this.originPoint.x,this.object.y=this.originPoint.y,tweener.add(this.object).from({alpha:0},600,Tweener.ease.quintOut),this.object.addChild(this.object.walking)}},{key:"update",value:function(){this.praying?this.pray():this.move()}},{key:"move",value:function(){var e={x:.01*Math.cos(this.angle)*clock.deltaTime*this.attributes.velocity,y:.01*Math.sin(this.angle)*clock.deltaTime*this.attributes.velocity};e.x>0&&(this.object.scale.x=-1),this.object.x-=e.x,this.object.y-=e.y;var t=Math.sqrt(Math.pow(this.object.x-this.targetSlot.x,2)+Math.pow(this.object.y-this.targetSlot.y,2));5>t&&(this.praying=!0,this.targetSlot.prayers.push(this),this.waveController.prayers.push(this),this.object.removeChild(this.object.walking),this.object.addChild(this.object.praying))}},{key:"pray",value:function(){}},{key:"onDetach",value:function(){var e=this;this.object.walking.parent&&this.object.removeChild(this.object.walking),this.object.praying&&this.object.removeChild(this.object.praying);var t=this.targetSlot.prayers.indexOf(this);t>=0&&this.targetSlot.prayers.splice(this.targetSlot.prayers.indexOf(this),1);var n=this.waveController.prayers.indexOf(this);n>=0&&this.waveController.prayers.splice(this.waveController.prayers.indexOf(this),1),this.object.addChild(this.object.dead),tweener.add(this.object).to({alpha:0},5e3,Tweener.ease.quintOut).then(function(){e.object.parent.removeChild(e.object)});var i=new p["default"];i.position.copy(this.object.position),this.object.parent.addChild(i),this.object.addBehaviour(new c["default"]),console.log("Detached! Destroy this entity!")}}]),t}(u.Behaviour);n["default"]=d},{"../../../config/prayers.json":2,"../../entities/effects/Blood":18,"../particles/Explosion":10,"behaviour.js":30}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("behaviour.js"),u=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),a(t,[{key:"onAttach",value:function(){this.onUse(),this.on("use",this.onUse.bind(this))}},{key:"onUse",value:function(){this.object.cooldownMask.y=2*this.object.cooldown.height}},{key:"update",value:function(){this.object.cooldownMask.y=Math.max(this.object.cooldownMask.targetY,this.object.cooldownMask.y-1)}},{key:"onDetach",value:function(){}}]),t}(s.Behaviour);n["default"]=u},{"behaviour.js":30}],10:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("behaviour.js"),u=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),a(t,[{key:"onAttach",value:function(){this.emitter=new cloudkid.Emitter(this.object,[PIXI.Texture.fromImage("particle-blood.png")],{alpha:{start:.8,end:.1},scale:{start:3,end:2},color:{start:"fb1010",end:"f5b830"},speed:{start:50,end:30},startRotation:{min:0,max:180},rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},frequency:.008,emitterLifetime:.05,maxParticles:1e3,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}),clock.setTimeout(this.detach.bind(this),1e3)}},{key:"update",value:function(){this.emitter.update(.001*clock.deltaTime)}}]),t}(s.Behaviour);n["default"]=u},{"behaviour.js":30}],11:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){i(this,e)}return o(e,null,[{key:"load",value:function(e){this.onLoadComplete=e,this.loader=new PIXI.loaders.Loader,this.loader.add("spritesheet","images/spritesheet.json"),this.loader.add("background","images/background.png"),this.loader.on("complete",this.incrementLoader.bind(this)),this.loader.load()}},{key:"incrementLoader",value:function(){document.body.className="loaded",clock.setTimeout(function(){document.querySelector(".loading").style.display="none"},500),this.onLoadComplete()}}]),e}();n["default"]=r},{}],12:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this));return n.scale.x=e,n.scale.y=e,n.currentScene=null,n.nextScene=null,n.sceneInstanceMap={},n}return r(t,e),a(t,[{key:"goTo",value:function(e){var t=this,n=(arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e.name);this.sceneInstanceMap[n]||(this.sceneInstanceMap[n]=new e,this.bindEvents(this.sceneInstanceMap[n])),this.currentScene?(this.nextScene=this.sceneInstanceMap[n],this.defaultTransitionOut(this.currentScene),this.defaultTransitionIn(this.nextScene).then(function(){t.currentScene=t.nextScene,t.nextScene=null})):(this.currentScene=this.sceneInstanceMap[n],this.addChild(this.currentScene))}},{key:"bindEvents",value:function(e){var t=this;e.on("goto",function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];return t.goTo.apply(t,n)})}},{key:"defaultTransitionIn",value:function(e){return this.addChild(e),tweener.add(e).to({alpha:1},500,Tweener.ease.easeQuintOut)}},{key:"defaultTransitionOut",value:function(e){var t=this;return tweener.add(e).to({alpha:0},500,Tweener.ease.easeQuintOut).then(function(){e.emit("dispose"),e.off(),t.removeChild(e),delete t.sceneInstanceMap[e.constructor.name]})}}]),t}(PIXI.Container);n["default"]=s},{}],13:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(e){function t(){i(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.rotation=0,e.serious=new PIXI.Sprite.fromImage("jesus1.png"),e.serious.y-=70,e.attack=new PIXI.Sprite.fromImage("jesus2.png"),e.attack.x-=70,e.attack.y-=70,e.damage=new PIXI.Sprite.fromImage("jesus3.png"),e.damage.x-=40,e.damage.y-=110,e.setFace("serious"),e}return r(t,e),a(t,[{key:"setFace",value:function(e){this.currentFace!==e&&(this.currentFace&&this.removeChild(this[this.currentFace]),this.currentFace=e,this.addChild(this[this.currentFace]))}}]),t}(PIXI.Container);n["default"]=s},{}],14:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../config/prayers.json"),s=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this));return a[e],1===e?(n.walking=new PIXI.extras.MovieClip([PIXI.Texture.fromImage("walk0001.png"),PIXI.Texture.fromImage("walk0002.png"),PIXI.Texture.fromImage("walk0003.png"),PIXI.Texture.fromImage("walk0004.png"),PIXI.Texture.fromImage("walk0005.png"),PIXI.Texture.fromImage("walk0006.png"),PIXI.Texture.fromImage("walk0007.png"),PIXI.Texture.fromImage("walk0008.png"),PIXI.Texture.fromImage("walk0009.png"),PIXI.Texture.fromImage("walk0010.png"),PIXI.Texture.fromImage("walk0011.png"),PIXI.Texture.fromImage("walk0012.png"),PIXI.Texture.fromImage("walk0013.png"),PIXI.Texture.fromImage("walk0014.png"),PIXI.Texture.fromImage("walk0015.png"),PIXI.Texture.fromImage("walk0016.png"),PIXI.Texture.fromImage("walk0017.png"),PIXI.Texture.fromImage("walk0018.png"),PIXI.Texture.fromImage("walk0019.png"),PIXI.Texture.fromImage("walk0020.png"),PIXI.Texture.fromImage("walk0021.png"),PIXI.Texture.fromImage("walk0022.png"),PIXI.Texture.fromImage("walk0023.png"),PIXI.Texture.fromImage("walk0024.png"),PIXI.Texture.fromImage("walk0025.png"),PIXI.Texture.fromImage("walk0026.png"),PIXI.Texture.fromImage("walk0027.png"),PIXI.Texture.fromImage("walk0028.png"),PIXI.Texture.fromImage("walk0029.png"),PIXI.Texture.fromImage("walk0030.png"),PIXI.Texture.fromImage("walk0031.png"),PIXI.Texture.fromImage("walk0032.png")]),n.praying=new PIXI.extras.MovieClip([PIXI.Texture.fromImage("Pray0001.png"),PIXI.Texture.fromImage("Pray0002.png"),PIXI.Texture.fromImage("Pray0003.png"),PIXI.Texture.fromImage("Pray0004.png"),PIXI.Texture.fromImage("Pray0005.png"),PIXI.Texture.fromImage("Pray0006.png"),PIXI.Texture.fromImage("Pray0007.png"),PIXI.Texture.fromImage("Pray0008.png"),PIXI.Texture.fromImage("Pray0009.png"),PIXI.Texture.fromImage("Pray0010.png"),PIXI.Texture.fromImage("Pray0011.png"),PIXI.Texture.fromImage("Pray0012.png"),PIXI.Texture.fromImage("Pray0013.png")])):2===e&&(n.walking=new PIXI.extras.MovieClip([PIXI.Texture.fromImage("skate_walk0001.png"),PIXI.Texture.fromImage("skate_walk0002.png"),PIXI.Texture.fromImage("skate_walk0003.png"),PIXI.Texture.fromImage("skate_walk0004.png"),PIXI.Texture.fromImage("skate_walk0005.png"),PIXI.Texture.fromImage("skate_walk0006.png"),PIXI.Texture.fromImage("skate_walk0007.png"),PIXI.Texture.fromImage("skate_walk0008.png"),PIXI.Texture.fromImage("skate_walk0009.png"),PIXI.Texture.fromImage("skate_walk0010.png"),PIXI.Texture.fromImage("skate_walk0011.png"),PIXI.Texture.fromImage("skate_walk0012.png"),PIXI.Texture.fromImage("skate_walk0013.png"),PIXI.Texture.fromImage("skate_walk0014.png"),PIXI.Texture.fromImage("skate_walk0015.png"),PIXI.Texture.fromImage("skate_walk0016.png"),PIXI.Texture.fromImage("skate_walk0017.png"),PIXI.Texture.fromImage("skate_walk0018.png"),PIXI.Texture.fromImage("skate_walk0019.png"),PIXI.Texture.fromImage("skate_walk0020.png"),PIXI.Texture.fromImage("skate_walk0021.png"),PIXI.Texture.fromImage("skate_walk0022.png"),PIXI.Texture.fromImage("skate_walk0023.png"),PIXI.Texture.fromImage("skate_walk0024.png"),PIXI.Texture.fromImage("skate_walk0025.png"),PIXI.Texture.fromImage("skate_walk0026.png"),PIXI.Texture.fromImage("skate_walk0027.png")]),n.praying=new PIXI.extras.MovieClip([PIXI.Texture.fromImage("skate_pray0001.png"),PIXI.Texture.fromImage("skate_pray0002.png"),PIXI.Texture.fromImage("skate_pray0003.png"),PIXI.Texture.fromImage("skate_pray0004.png"),PIXI.Texture.fromImage("skate_pray0005.png"),PIXI.Texture.fromImage("skate_pray0006.png"),PIXI.Texture.fromImage("skate_pray0007.png"),PIXI.Texture.fromImage("skate_pray0008.png"),PIXI.Texture.fromImage("skate_pray0009.png"),PIXI.Texture.fromImage("skate_pray0010.png"),PIXI.Texture.fromImage("skate_pray0011.png"),PIXI.Texture.fromImage("skate_pray0012.png"),PIXI.Texture.fromImage("skate_pray0013.png"),PIXI.Texture.fromImage("skate_pray0014.png")])),n.walking.pivot.x=n.walking.width/2,n.walking.pivot.y=n.walking.height,n.walking.animationSpeed=.2,n.walking.loop=!0,n.walking.play(),n.praying.pivot.x=n.praying.width/2,n.praying.pivot.y=n.praying.height,n.praying.animationSpeed=.2,n.praying.loop=!0,n.praying.play(),n.dead=new PIXI.extras.MovieClip([PIXI.Texture.fromImage("enemy-dead.png")]),n.dead.pivot.x=n.dead.width/2,n.dead.pivot.y=n.dead.width/2,n}return r(t,e),t}(PIXI.Container);n["default"]=s},{"../../config/prayers.json":2}],15:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("../utils/circle"),l=e("./Spot"),c=i(l),h=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this)),i=150,a=100,s=150;return n.god=e,n.pointArray=(0,u.getCircPointArray)(i,a,s,1),n.stone=new PIXI.Sprite.fromImage("cabine.png"),n.stone.pivot.x=n.stone.width/2,n.stone.pivot.y=n.stone.height/2,n.slotInstances=[],n.stone.x=i,n.stone.y=a,n.addChild(n.stone),n}return a(t,e),s(t,[{key:"onAction",value:function(e,t){this.god.getEntity().emit("action",e,t.data.global),console.log("Action on spot!",e)}},{key:"resize",value:function(){}},{key:"slots",get:function(){return this.slotInstances},set:function(e){for(var t=0;t<this.slotInstances.length;t++)this.slotInstances[t].removeAllListeners(),this.slotInstances[t].parent.removeChild(this.slotInstances[t]);this.slotInstances=[];for(var n=Math.floor(this.pointArray.length/e),t=0;e>t;t++){var i=this.pointArray[t*n],o=new c["default"];o.x=i.x,o.y=i.y,o.on("click",this.onAction.bind(this,o)),this.slotInstances.push(o),this.addChild(o)}}}]),t}(PIXI.Container);n["default"]=h},{"../utils/circle":26,"./Spot":16}],16:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e){function t(){i(this,t);var e=o(this,Object.getPrototypeOf(t).call(this,PIXI.Texture.fromImage("enemy-spot.png")));return e.interactive=!0,e.pivot.x=e.width/2,e.pivot.y=e.height,e.prayers=[],e}return r(t,e),t}(PIXI.Sprite);n["default"]=a},{}],17:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e){function t(){i(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.thunder2=new PIXI.Sprite.fromImage("ray2.png"),e.thunder2.pivot.x=-20,e.thunder2.pivot.y=e.thunder2.height/6,e.addChild(e.thunder2),tweener.add(e).wait(500).to({alpha:0},300,Tweener.ease.quintOut).then(function(){e.parent.removeChild(e)}),e}return r(t,e),t}(PIXI.Container);n["default"]=a},{}],18:[function(e,t,n){"use strict";function i(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(e){function t(){i(this,t);var e=o(this,Object.getPrototypeOf(t).call(this,PIXI.Texture.fromImage("blood.png")));return e.alpha=0,e.pivot.x=e.width/2,e.pivot.y=e.height/2,e.scale.x=.1,e.scale.y=.1,e.on("added",e.onAdded.bind(e)),e}return r(t,e),a(t,[{key:"onAdded",value:function(){var e=this;tweener.add(this.scale).to({x:2,y:2},1500,Tweener.ease.quintOut),tweener.add(this).to({alpha:1},500,Tweener.ease.quintOut).wait(3e3).to({alpha:0},5e3,Tweener.ease.quintOut).then(function(){e.parent.removeChild(e)})}}]),t}(PIXI.Sprite);n["default"]=s},{}],19:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(e){function t(){i(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.bg=new PIXI.Sprite.fromImage("faixa1.png"),e.addChild(e.bg),e.background=new PIXI.Graphics,e.background.beginFill(0),e.background.drawRect(0,0,e.bg.width,10),e.background.position.y=e.bg.height/2,e.fill=new PIXI.Graphics,e.fill.beginFill(16711680),e.fill.drawRect(0,0,e.bg.width,10),e.fill.position.y=e.bg.height/2,e.progress=0,e}return r(t,e),a(t,[{key:"goUp",value:function(){tweener.add(this).to({y:this.y-8},1e3,Tweener.ease.quintInOut).then(this.goDown.bind(this))}},{key:"goDown",value:function(){tweener.add(this).to({y:this.y+8},1e3,Tweener.ease.quintInOut).then(this.goUp.bind(this))}},{key:"progress",get:function(){return this.fill.scale.x},set:function(e){this.fill.scale.x=Math.min(Math.max(e,0),1),1===this.fill.scale.x&&this.emit("gameover")}}]),t}(PIXI.Container);n["default"]=s},{}],20:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./Progress"),l=(i(u),e("../../behaviours/entities/SpellButtonBehaviour")),c=i(l),h=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this));return n.active=new PIXI.Sprite.fromImage(e+".png"),n.addChild(n.active),n.cooldown=new PIXI.Sprite.fromImage(e+"-available.png"),n.addChild(n.cooldown),n.cooldownMask=new PIXI.Graphics,n.cooldownMask.lineStyle(2,0,.8),n.cooldownMask.beginFill(0),n.cooldownMask.drawCircle(0,0,25),n.cooldownMask.x=n.cooldownMask.width/2,n.cooldownMask.targetY=n.cooldownMask.height/2,n.addChild(n.cooldownMask),n.cooldown.mask=n.cooldownMask,n.addBehaviour(new c["default"]),n}return a(t,e),s(t,[{key:"isAvailable",get:function(){return this.cooldownMask.y===this.cooldownMask.targetY}}]),t}(PIXI.Container);n["default"]=h},{"../../behaviours/entities/SpellButtonBehaviour":9,"./Progress":19}],21:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=e("./core/Resources"),r=i(o),a=e("./Application"),s=i(a),u=e("howler"),l=e("./screens/TitleScreen"),c=(i(l),e("./screens/GameScreen")),h=i(c);e("pixi-particles"),console.log(e("../config/sound_effects.json")),window.sounds=new u.Howl(e("../config/sound_effects.json")),window.music=new u.Howl(e("../config/music.json")),sounds.on("load",function(){console.log("Effects loaded")}),music.on("load",function(){console.log("Music loaded")}),window.playSound=function(e){if("string"==typeof e)sounds.play(e);else{var t=Math.floor(Math.random()*e.length);sounds.play(e[t])}},r["default"].load(function(){window.APP=new s["default"],APP.gotoScene(h["default"]),APP.update()})},{"../config/music.json":1,"../config/sound_effects.json":3,"./Application":5,"./core/Resources":11,"./screens/GameScreen":23,"./screens/TitleScreen":25,howler:33,"pixi-particles":34}],22:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./GameScreen"),l=i(u),c=function(e){function t(){o(this,t);var e=r(this,Object.getPrototypeOf(t).call(this)),n=PIXI.Sprite.fromImage("game-over.png");n.pivot.x=n.width/2,n.pivot.y=n.height/2,n.x=APP.width/2,n.y=APP.height/2,e.addChild(n);var i=new PIXI.Text("Try again",{font:"24px Arial",fill:16715792,align:"center"});return i.interactive=!0,i.x=APP.width/2,i.y=APP.height/2+200,i.pivot.set(i.width/2,i.height/2),i.on("click",function(){return e.emit("goto",l["default"])}),e.addChild(i),e}return a(t,e),s(t,[{key:"onDispose",value:function(){}}]),t}(PIXI.Container);n["default"]=c},{"./GameScreen":23}],23:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./TitleScreen"),l=(i(u),e("./GameOverScreen")),c=i(l),h=e("../entities/hud/SpellButton"),p=i(h),f=e("../entities/RitualCircle"),d=i(f),y=e("../behaviours/controllers/WaveController"),m=i(y),v=e("../entities/hud/Progress"),_=i(v),g=e("../entities/God"),w=i(g),b=e("../behaviours/entities/GodBehaviour"),I=i(b);window.HUD_MARGIN=8;var P=function(e){function t(){o(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return music.play("loop",{loop:!0}),e.waveController=new m["default"],e.bg=new PIXI.Sprite.fromImage("images/background.png"),e.addChild(e.bg),e.action1=new p["default"]("power-1"),e.action1.x=HUD_MARGIN,e.addChild(e.action1),e.action2=new p["default"]("power-2"),e.action2.x=HUD_MARGIN,e.action2.y=e.action1.height+HUD_MARGIN,e.addChild(e.action2),e.god=new w["default"],e.god.pivot.x=e.god.width/2,e.god.pivot.y=e.god.height/2,e.god.x=APP.width/2,e.god.y=e.god.height+4*HUD_MARGIN,e.god.addBehaviour(new I["default"],{waveController:e.waveController,action1:e.action1,action2:e.action2}),e.addChild(e.god),e.progress=new _["default"],e.progress.pivot.x=e.progress.bg.width/2,e.progress.pivot.y=e.progress.bg.height/2,e.progress.x=APP.width/2,e.progress.y=e.god.y+e.god.height/3,e.progress.once("gameover",function(){return e.emit("goto",c["default"])}),e.progress.goUp(),e.addChild(e.progress),e.ritualCircle=new d["default"](e.god),e.ritualCircle.pivot.x=e.ritualCircle.width/2,e.ritualCircle.pivot.y=e.ritualCircle.height/2,e.ritualCircle.x=APP.width/2-50,e.ritualCircle.y=APP.height/2+e.ritualCircle.height-10,e.ritualCircle.addBehaviour(e.waveController,{progress:e.progress,god:e.god}),e.addChild(e.ritualCircle),window.addEventListener("resize",e.onResize.bind(e)),e.on("touchstart",e.onTouchStart.bind(e)),e.on("touchend",e.onTouchEnd.bind(e)),e.on("dispose",e.onDispose.bind(e)),e}return a(t,e),s(t,[{key:"onTouchStart",value:function(e){}},{key:"onTouchEnd",value:function(e){}},{key:"onResize",value:function(){}},{key:"onDispose",value:function(){}}]),t}(PIXI.Container);n["default"]=P},{"../behaviours/controllers/WaveController":6,"../behaviours/entities/GodBehaviour":7,"../entities/God":13,"../entities/RitualCircle":15,"../entities/hud/Progress":19,"../entities/hud/SpellButton":20,"./GameOverScreen":22,"./TitleScreen":25}],24:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./TitleScreen"),l=(i(u),e("./GameScreen")),c=i(l),h=function(e){function t(){o(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.one=new PIXI.Sprite.fromImage("presentation-1.png"),e.one.alpha=0,e.addChild(e.one),e.two=new PIXI.Sprite.fromImage("presentation-2.png"),e.two.alpha=0,e.addChild(e.two),e.three=new PIXI.Sprite.fromImage("presentation-3.png"),e.three.alpha=0,e.addChild(e.three),e.four=new PIXI.Sprite.fromImage("presentation-4.png"),e.four.alpha=0,e.addChild(e.four),tweener.add(e.one).to({alpha:1},1e3,Tweener.ease.quintOut).then(function(){tweener.add(e.one).to({alpha:0},500,Tweener.ease.quintOut),tweener.add(e.two).to({alpha:1},1e3,Tweener.ease.quintOut).then(function(){tweener.add(e.two).to({alpha:0},500,Tweener.ease.quintOut),tweener.add(e.three).to({alpha:1},1e3,Tweener.ease.quintOut).then(function(){tweener.add(e.three).to({alpha:0},500,Tweener.ease.quintOut),tweener.add(e.four).to({alpha:1},1e3,Tweener.ease.quintOut).then(function(){tweener.add(e.four).to({alpha:0},500,Tweener.ease.quintOut),tweener.add(e.four).to({alpha:1},1e3,Tweener.ease.quintOut).then(function(){e.emit("goto",c["default"])})})})})}),e.on("dispose",e.onDispose.bind(e)),e}return a(t,e),s(t,[{key:"onDispose",value:function(){}}]),t}(PIXI.Container);n["default"]=h},{"./GameScreen":23,"./TitleScreen":25}],25:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./GameScreen"),l=(i(u),e("./PresentationScreen")),c=i(l),h=e("../behaviours/particles/Explosion"),p=i(h),f=function(e){function t(){o(this,t);var e=r(this,Object.getPrototypeOf(t).call(this)),n=new PIXI.Text("GGJ16",{font:"24px Arial",fill:16715792,align:"center"});n.pivot.set(n.width/2,n.height/2),n.y=40,n.x=APP.width/2,e.addChild(n);var i=new PIXI.Text("START",{font:"24px Arial",fill:16715792,align:"center"});return i.interactive=!0,i.x=APP.width/2,i.pivot.set(i.width/2,i.height/2),i.y+=100,i.on("click",e.onStartClick.bind(e)),e.addChild(i),e.addBehaviour(new p["default"]),e.on("dispose",e.onDispose.bind(e)),e}return a(t,e),s(t,[{key:"onDispose",value:function(){}},{key:"onStartClick",value:function(e){this.emit("goto",c["default"])}}]),t}(PIXI.Container);n["default"]=f},{"../behaviours/particles/Explosion":10,"./GameScreen":23,"./PresentationScreen":24}],26:[function(e,t,n){"use strict";function i(e,t,n,i){for(var o=n/i,r=2*Math.PI/o,a=[],s=-1;o>s;){var u=r*s,l=r*(s+1);a.push({x:Math.cos(u)*n+e,y:Math.sin(u)*n+t,ex:Math.cos(l)*n+e,ey:Math.sin(l)*n+t}),s+=2}return a}Object.defineProperty(n,"__esModule",{value:!0}),n.getCircPointArray=i},{}],27:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.entity=null,this.object=null,this._callbacks=[]}return o(e,[{key:"attach",value:function(e){this.entity=e,this.object=e.object}},{key:"onAttach",value:function(e){}},{key:"onDetach",value:function(){}},{key:"detach",value:function(){this.emit("detach",this);for(var e=0;e<this._callbacks.length;e++)this.off.apply(this,this._callbacks[e])}},{key:"on",value:function(){this._callbacks.push(arguments),this.entity.on.apply(this.entity,arguments)}},{key:"once",value:function(){this._callbacks.push(arguments),this.entity.once.apply(this.entity,arguments)}},{key:"off",value:function(){this.entity.off.apply(this.entity,arguments)}},{key:"emit",value:function(){this.entity.emit.apply(this.entity,arguments)}}]),e}();t.exports=r},{}],28:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("tiny-emitter"),u=function(e){function t(e,n){i(this,t);var r=o(this,Object.getPrototypeOf(t).call(this));return r.id=n,r.object=e,r.behaviours=[],r.on("detach",r.detach.bind(r)),r}return r(t,e),a(t,[{key:"attach",value:function(e,t){this.behaviours.push(e),e.attach(this),e.onAttach.apply(e,t)}},{key:"detach",value:function(e){var t=this.behaviours.indexOf(e);-1!==t&&(this.behaviours.splice(t,1),e.onDetach())}},{key:"detachAll",value:function(){for(var e=this.behaviours.length;e--;)this.detach(this.behaviours[e])}},{key:"update",value:function(){for(var e=this.behaviours.length;e--;)this.behaviours[e].update&&this.behaviours[e].update()}},{key:"destroy",value:function(){this.detachAll(),this.emit("destroy")}}]),t}(s);t.exports=u},{"tiny-emitter":35}],29:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("./Entity"),a=function(){function e(){i(this,e),this.objectId=0,this.entities={}}return o(e,[{key:"add",value:function(e){this.entities[e.id]=e,e.on("destroy",this.onEntityDestroy.bind(this,e))}},{key:"update",value:function(){for(var e in this.entities)this.entities[e].update()}},{key:"mount",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.addBehaviour||(t.addBehaviour="addBehaviour"),t.getEntity||(t.getEntity="getEntity"),this.baseClass=e,this.mountOptions=t;var n=this;this.baseClass.prototype[t.getEntity]=function(){return this.__ENTITY__||(this.__ENTITY__=new r(this,n.objectId++),n.add(this.__ENTITY__)),this.__ENTITY__},this.baseClass.prototype[t.addBehaviour]=function(e){var n=this[t.getEntity](),i=Array.prototype.splice.apply(arguments,[1]);return n.attach(e,i),n}}},{key:"onEntityDestroy",value:function(e){delete this.entities[e.id]}},{key:"destroy",value:function(){delete this.baseClass.prototype[this.mountOptions.addBehaviour],delete this.baseClass.prototype[this.mountOptions.getEntity]}}]),e}();t.exports=a},{"./Entity":28}],30:[function(e,t,n){"use strict";var i=e("./Behaviour"),o=e("./System");t.exports.createComponentSystem=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=new o;return n.mount(e,t),n},t.exports.Behaviour=i},{"./Behaviour":27,"./System":29}],31:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function y(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("clock.js"),c=i(l),h=0,p=1,f=function(){function e(t,n,i,o){a(this,e),this.active=!0,this.handler=t,this.args=n,this.time=i,this.elapsedTime=0,this.type=o}return u(e,[{key:"tick",value:function(e){this.elapsedTime+=e,this.elapsedTime>=this.time&&this.execute()}},{key:"execute",value:function(){this.handler.apply(this,this.args),this.type===p?this.active=!1:this.elapsedTime-=this.time}},{key:"clear",value:function(){this.active=!1}}]),e}(),d=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.delayed=[],n}return r(t,e),u(t,[{key:"tick",value:function(){s(Object.getPrototypeOf(t.prototype),"tick",this).call(this);for(var e=this.delayed.length;e--;)this.delayed[e].tick(this.deltaTime),this.delayed[e].active||this.delayed.splice(e,1)}},{key:"setInterval",value:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;n>o;o++)i[o-2]=arguments[o];var r=new f(e,i,t,h);return this.delayed.push(r),r}},{key:"setTimeout",value:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;n>o;o++)i[o-2]=arguments[o];var r=new f(e,i,t,p);return this.delayed.push(r),r}}]),t}(c["default"]);t.exports=d},{"clock.js":32}],32:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];i(this,e),this.running=!1,this.deltaTime=0,this.currentTime=0,this.elapsedTime=0,this.now="undefined"!=typeof window&&window.performance&&window.performance.now.bind(window.performance)||Date.now,t&&this.start()}return o(e,[{key:"start",value:function(){this.deltaTime=0,this.currentTime=this.now(),this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.running=!1}},{key:"tick",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.now():arguments[0];this.deltaTime=e-this.currentTime,this.currentTime=e,this.elapsedTime+=this.deltaTime}}]),e}();t.exports=r},{}],33:[function(e,t,n){!function(){var e={},t=null,i=!0,o=!1;try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:i=!1}catch(r){i=!1}if(!i)if("undefined"!=typeof Audio)try{new Audio}catch(r){o=!0}else o=!0;if(i){var a="undefined"==typeof t.createGain?t.createGainNode():t.createGain();a.gain.value=1,a.connect(t.destination)}var s=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=i,this.ctx=t,this.noAudio=o,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};s.prototype={volume:function(e){var t=this;if(e=parseFloat(e),e>=0&&1>=e){t._volume=e,i&&(a.gain.value=e);for(var n in t._howls)if(t._howls.hasOwnProperty(n)&&t._howls[n]._webAudio===!1)for(var o=0;o<t._howls[n]._audioNode.length;o++)t._howls[n]._audioNode[o].volume=t._howls[n]._volume*t._volume;return t}return i?a.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,i&&(a.gain.value=e?0:t._volume);for(var n in t._howls)if(t._howls.hasOwnProperty(n)&&t._howls[n]._webAudio===!1)for(var o=0;o<t._howls[n]._audioNode.length;o++)t._howls[n]._audioNode[o].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var n=function(){var i=t.createBuffer(1,1,22050),o=t.createBufferSource();o.buffer=i,o.connect(t.destination),"undefined"==typeof o.start?o.noteOn(0):o.start(0),setTimeout(function(){(o.playbackState===o.PLAYING_STATE||o.playbackState===o.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchend",n,!1))},0)};return window.addEventListener("touchend",n,!1),e}}};var u=null,l={};o||(u=new Audio,l={mp3:!!u.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var c=new s(l),h=function(e){var n=this;n._autoplay=e.autoplay||!1,n._buffer=e.buffer||!1,n._duration=e.duration||0,n._format=e.format||null,n._loop=e.loop||!1,n._loaded=!1,n._sprite=e.sprite||{},n._src=e.src||"",n._pos3d=e.pos3d||[0,0,-.5],n._volume=void 0!==e.volume?e.volume:1,n._urls=e.urls||[],n._rate=e.rate||1,n._model=e.model||null,n._onload=[e.onload||function(){}],n._onloaderror=[e.onloaderror||function(){}],n._onend=[e.onend||function(){}],n._onpause=[e.onpause||function(){}],n._onplay=[e.onplay||function(){}],n._onendTimer=[],n._webAudio=i&&!n._buffer,n._audioNode=[],n._webAudio&&n._setupAudioNode(),"undefined"!=typeof t&&t&&c.iOSAutoEnable&&c._enableiOSAudio(),c._howls.push(n),n.load()};if(h.prototype={load:function(){var e=this,t=null;if(o)return void e.on("loaderror",new Error("No audio support."));for(var n=0;n<e._urls.length;n++){var i,r;if(e._format)i=e._format;else{if(r=e._urls[n],i=/^data:audio\/([^;,]+);/i.exec(r),i||(i=/\.([^.]+)$/.exec(r.split("?",1)[0])),!i)return void e.on("loaderror",new Error("Could not extract format from passed URLs, please add format parameter."));i=i[1].toLowerCase()}if(l[i]){t=e._urls[n];break}}if(!t)return void e.on("loaderror",new Error("No codec support for selected audio sources."));if(e._src=t,e._webAudio)p(e,t);else{var a=new Audio;a.addEventListener("error",function(){a.error&&4===a.error.code&&(s.noAudio=!0),e.on("loaderror",{type:a.error?a.error.code:0})},!1),e._audioNode.push(a),a.src=t,a._pos=0,a.preload="auto",a.volume=c._muted?0:e._volume*c.volume();var u=function(){e._duration=Math.ceil(10*a.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),a.removeEventListener("canplaythrough",u,!1)};a.addEventListener("canplaythrough",u,!1),a.load()}return e},urls:function(e){var t=this;return e?(t.stop(),t._urls="string"==typeof e?[e]:e,t._loaded=!1,t.load(),t):t._urls},play:function(e,n){var i=this;return"function"==typeof e&&(n=e),e&&"function"!=typeof e||(e="_default"),i._loaded?i._sprite[e]?(i._inactiveNode(function(o){o._sprite=e;var r=o._pos>0?o._pos:i._sprite[e][0]/1e3,a=0;i._webAudio?(a=i._sprite[e][1]/1e3-o._pos,o._pos>0&&(r=i._sprite[e][0]/1e3+r)):a=i._sprite[e][1]/1e3-(r-i._sprite[e][0]/1e3);var s,u=!(!i._loop&&!i._sprite[e][2]),l="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var t={id:l,sprite:e,loop:u};s=setTimeout(function(){!i._webAudio&&u&&i.stop(t.id).play(e,t.id),i._webAudio&&!u&&(i._nodeById(t.id).paused=!0,i._nodeById(t.id)._pos=0,i._clearEndTimer(t.id)),i._webAudio||u||i.stop(t.id),i.on("end",l)},a/i._rate*1e3),i._onendTimer.push({timer:s,id:t.id})}(),i._webAudio){var h=i._sprite[e][0]/1e3,p=i._sprite[e][1]/1e3;o.id=l,o.paused=!1,y(i,[u,h,p],l),i._playStart=t.currentTime,o.gain.value=i._volume,"undefined"==typeof o.bufferSource.start?u?o.bufferSource.noteGrainOn(0,r,86400):o.bufferSource.noteGrainOn(0,r,a):u?o.bufferSource.start(0,r,86400):o.bufferSource.start(0,r,a)}else{if(4!==o.readyState&&(o.readyState||!navigator.isCocoonJS))return i._clearEndTimer(l),function(){var t=i,r=e,a=n,s=o,u=function(){t.play(r,a),s.removeEventListener("canplaythrough",u,!1)};s.addEventListener("canplaythrough",u,!1)}(),i;o.readyState=4,o.id=l,o.currentTime=r,o.muted=c._muted||o.muted,o.volume=i._volume*c.volume(),setTimeout(function(){o.play()},0)}return i.on("play"),"function"==typeof n&&n(l),i}),i):("function"==typeof n&&n(),i):(i.on("load",function(){i.play(e,n)}),i)},pause:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.pause(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=t.pos(null,e),t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return t.on("pause"),t},stop:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.stop(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=0,t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return t},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=0:n.muted=!0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=t._volume:n.muted=!1),t},volume:function(e,t){var n=this;if(e=parseFloat(e),e>=0&&1>=e){if(n._volume=e,!n._loaded)return n.on("play",function(){n.volume(e,t)}),n;var i=t?n._nodeById(t):n._activeNode();return i&&(n._webAudio?i.gain.value=e:i.volume=e*c.volume()),n}return n._volume},loop:function(e){var t=this;return"boolean"==typeof e?(t._loop=e,t):t._loop},sprite:function(e){var t=this;return"object"==typeof e?(t._sprite=e,t):t._sprite},pos:function(e,n){var i=this;if(!i._loaded)return i.on("load",function(){i.pos(e)}),"number"==typeof e?i:i._pos||0;e=parseFloat(e);var o=n?i._nodeById(n):i._activeNode();if(o)return e>=0?(i.pause(n),o._pos=e,i.play(o._sprite,n),i):i._webAudio?o._pos+(t.currentTime-i._playStart):o.currentTime;if(e>=0)return i;for(var r=0;r<i._audioNode.length;r++)if(i._audioNode[r].paused&&4===i._audioNode[r].readyState)return i._webAudio?i._audioNode[r]._pos:i._audioNode[r].currentTime},pos3d:function(e,t,n,i){var o=this;if(t="undefined"!=typeof t&&t?t:0,n="undefined"!=typeof n&&n?n:-.5,!o._loaded)return o.on("play",function(){o.pos3d(e,t,n,i)}),o;if(!(e>=0||0>e))return o._pos3d;if(o._webAudio){var r=i?o._nodeById(i):o._activeNode();r&&(o._pos3d=[e,t,n],r.panner.setPosition(e,t,n),r.panner.panningModel=o._model||"HRTF")}return o},fade:function(e,t,n,i,o){var r=this,a=Math.abs(e-t),s=e>t?"down":"up",u=a/.01,l=n/u;if(!r._loaded)return r.on("load",function(){r.fade(e,t,n,i,o)}),r;r.volume(e,o);for(var c=1;u>=c;c++)!function(){var e=r._volume+("up"===s?.01:-.01)*c,n=Math.round(1e3*e)/1e3,a=t;setTimeout(function(){r.volume(n,o),n===a&&i&&i()},l*c)}()},fadeIn:function(e,t,n){return this.volume(0).play().fade(0,e,t,n)},fadeOut:function(e,t,n,i){var o=this;return o.fade(o._volume,e,t,function(){n&&n(),o.pause(i),o.on("end")},i)},_nodeById:function(e){for(var t=this,n=t._audioNode[0],i=0;i<t._audioNode.length;i++)if(t._audioNode[i].id===e){
n=t._audioNode[i];break}return n},_activeNode:function(){for(var e=this,t=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){t=e._audioNode[n];break}return e._drainPool(),t},_inactiveNode:function(e){for(var t=this,n=null,i=0;i<t._audioNode.length;i++)if(t._audioNode[i].paused&&4===t._audioNode[i].readyState){e(t._audioNode[i]),n=!0;break}if(t._drainPool(),!n){var o;if(t._webAudio)o=t._setupAudioNode(),e(o);else{t.load(),o=t._audioNode[t._audioNode.length-1];var r=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",a=function(){o.removeEventListener(r,a,!1),e(o)};o.addEventListener(r,a,!1)}}},_drainPool:function(){var e,t=this,n=0;for(e=0;e<t._audioNode.length;e++)t._audioNode[e].paused&&n++;for(e=t._audioNode.length-1;e>=0&&!(5>=n);e--)t._audioNode[e].paused&&(t._webAudio&&t._audioNode[e].disconnect(0),n--,t._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var t=this,n=-1,i=0;i<t._onendTimer.length;i++)if(t._onendTimer[i].id===e){n=i;break}var o=t._onendTimer[n];o&&(clearTimeout(o.timer),t._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,i=e._audioNode.length;return n[i]="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),n[i].gain.value=e._volume,n[i].paused=!0,n[i]._pos=0,n[i].readyState=4,n[i].connect(a),n[i].panner=t.createPanner(),n[i].panner.panningModel=e._model||"equalpower",n[i].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[i].panner.connect(n[i]),n[i]},on:function(e,t){var n=this,i=n["_on"+e];if("function"==typeof t)i.push(t);else for(var o=0;o<i.length;o++)t?i[o].call(n,t):i[o].call(n);return n},off:function(e,t){var n=this,i=n["_on"+e];if(t){for(var o=0;o<i.length;o++)if(t===i[o]){i.splice(o,1);break}}else n["_on"+e]=[];return n},unload:function(){for(var t=this,n=t._audioNode,i=0;i<t._audioNode.length;i++)n[i].paused||(t.stop(n[i].id),t.on("end",n[i].id)),t._webAudio?n[i].disconnect(0):n[i].src="";for(i=0;i<t._onendTimer.length;i++)clearTimeout(t._onendTimer[i].timer);var o=c._howls.indexOf(t);null!==o&&o>=0&&c._howls.splice(o,1),delete e[t._src],t=null}},i)var p=function(t,n){if(n in e)return t._duration=e[n].duration,void d(t);if(/^data:[^;]+;base64,/.test(n)){for(var i=atob(n.split(",")[1]),o=new Uint8Array(i.length),r=0;r<i.length;++r)o[r]=i.charCodeAt(r);f(o.buffer,t,n)}else{var a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onload=function(){f(a.response,t,n)},a.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[n],t.load())};try{a.send()}catch(s){a.onerror()}}},f=function(n,i,o){t.decodeAudioData(n,function(t){t&&(e[o]=t,d(i,t))},function(e){i.on("loaderror",e)})},d=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},y=function(n,i,o){var r=n._nodeById(o);r.bufferSource=t.createBufferSource(),r.bufferSource.buffer=e[n._src],r.bufferSource.connect(r.panner),r.bufferSource.loop=i[0],i[0]&&(r.bufferSource.loopStart=i[1],r.bufferSource.loopEnd=i[1]+i[2]),r.bufferSource.playbackRate.value=n._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:c,Howl:h}}),"undefined"!=typeof n&&(n.Howler=c,n.Howl=h),"undefined"!=typeof window&&(window.Howler=c,window.Howl=h)}()},{}],34:[function(e,t,n){!function(){"use strict";!function(e){window.cloudkid=window.cloudkid||{};var t=PIXI.BLEND_MODES||PIXI.blendModes,n={},i=n.DEG_TO_RADS=Math.PI/180;n.useAPI3=!1;var o=PIXI.VERSION;o&&parseInt(o.substring(0,o.indexOf(".")))>=3&&(n.useAPI3=!0),n.rotatePoint=function(e,t){if(e){e*=i;var n=Math.sin(e),o=Math.cos(e),r=t.x*o-t.y*n,a=t.x*n+t.y*o;t.x=r,t.y=a}},n.combineRGBComponents=function(e,t,n){return e<<16|t<<8|n},n.normalize=function(e){var t=1/n.length(e);e.x*=t,e.y*=t},n.scaleBy=function(e,t){e.x*=t,e.y*=t},n.length=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.hexToRGB=function(e,t){t?t.length=0:t=[],"#"==e.charAt(0)?e=e.substr(1):0===e.indexOf("0x")&&(e=e.substr(2));var n;return 8==e.length&&(n=e.substr(0,2),e=e.substr(2)),t.push(parseInt(e.substr(0,2),16)),t.push(parseInt(e.substr(2,2),16)),t.push(parseInt(e.substr(4,2),16)),n&&t.push(parseInt(n,16)),t},n.generateEase=function(e){var t=e.length,n=1/t,i=function(i){var o,r,a=t*i|0;return o=(i-a*n)*t,r=e[a]||e[t-1],r.s+o*(2*(1-o)*(r.cp-r.s)+o*(r.e-r.s))};return i},n.getBlendMode=function(e){if(!e)return t.NORMAL;for(e=e.toUpperCase();e.indexOf(" ")>=0;)e=e.replace(" ","_");return t[e]||t.NORMAL},cloudkid.ParticleUtils=n,Array.prototype.shuffle||Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var e,t,n=this.length;n;e=Math.floor(Math.random()*n),t=this[--n],this[n]=this[e],this[e]=t);return this}}),Array.prototype.random||Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}})}(),function(e,t){var n,i=e.ParticleUtils,o=PIXI.Sprite,r=i.useAPI3;if(!r){var a=document.createElement("canvas");a.width=a.height=1,n=PIXI.Texture.fromCanvas(a)}var s=function(e){r?o.call(this):o.call(this,n),this.emitter=e,this.anchor.x=this.anchor.y=.5,this.velocity=new PIXI.Point,this.maxLife=0,this.age=0,this.ease=null,this.extraData=null,this.startAlpha=0,this.endAlpha=0,this.startSpeed=0,this.endSpeed=0,this.acceleration=null,this.startScale=0,this.endScale=0,this.startColor=null,this._sR=0,this._sG=0,this._sB=0,this.endColor=null,this._eR=0,this._eG=0,this._eB=0,this._doAlpha=!1,this._doScale=!1,this._doSpeed=!1,this._doColor=!1,this._doNormalMovement=!1,this._oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.Particle_init=this.Particle_init,this.update=this.update,this.Particle_update=this.Particle_update,this.applyArt=this.applyArt,this.kill=this.kill},u=s.prototype=Object.create(o.prototype);u.init=u.Particle_init=function(){this.age=0,this.velocity.x=this.startSpeed,this.velocity.y=0,i.rotatePoint(this.rotation,this.velocity),this.rotation*=i.DEG_TO_RADS,this.rotationSpeed*=i.DEG_TO_RADS,this.alpha=this.startAlpha,this.scale.x=this.scale.y=this.startScale,this.startColor&&(this._sR=this.startColor[0],this._sG=this.startColor[1],this._sB=this.startColor[2],this.endColor&&(this._eR=this.endColor[0],this._eG=this.endColor[1],this._eB=this.endColor[2])),this._doAlpha=this.startAlpha!=this.endAlpha,this._doSpeed=this.startSpeed!=this.endSpeed,this._doScale=this.startScale!=this.endScale,this._doColor=!!this.endColor,this._doNormalMovement=this._doSpeed||0!==this.startSpeed||this.acceleration,this._oneOverLife=1/this.maxLife,this.tint=i.combineRGBComponents(this._sR,this._sG,this._sB),this.visible=!0},u.applyArt=function(e){r?this.texture=e:this.setTexture(e)},u.update=u.Particle_update=function(e){if(this.age+=e,this.age>=this.maxLife)return this.kill(),-1;var t=this.age*this._oneOverLife;if(this.ease&&(t=4==this.ease.length?this.ease(t,0,1,1):this.ease(t)),this._doAlpha&&(this.alpha=(this.endAlpha-this.startAlpha)*t+this.startAlpha),this._doScale){var n=(this.endScale-this.startScale)*t+this.startScale;this.scale.x=this.scale.y=n}if(this._doNormalMovement){if(this._doSpeed){var o=(this.endSpeed-this.startSpeed)*t+this.startSpeed;i.normalize(this.velocity),i.scaleBy(this.velocity,o)}else this.acceleration&&(this.velocity.x+=this.acceleration.x*e,this.velocity.y+=this.acceleration.y*e);this.position.x+=this.velocity.x*e,this.position.y+=this.velocity.y*e}if(this._doColor){var r=(this._eR-this._sR)*t+this._sR,a=(this._eG-this._sG)*t+this._sG,s=(this._eB-this._sB)*t+this._sB;this.tint=i.combineRGBComponents(r,a,s)}return 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*e:this.acceleration&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),t},u.kill=function(){this.emitter.recycle(this)},u.destroy=function(){this.emitter=this.velocity=this.startColor=this.endColor=this.ease=this.next=this.prev=null},s.parseArt=function(e){var t;for(t=e.length;t>=0;--t)"string"==typeof e[t]&&(e[t]=PIXI.Texture.fromImage(e[t]));return e},s.parseData=function(e){return e},e.Particle=s}(cloudkid),function(e,t){var n=e.ParticleUtils,i=e.Particle,o=PIXI.ParticleContainer,r=function(e,t,n){this._particleConstructor=i,this.particleImages=null,this.startAlpha=1,this.endAlpha=1,this.startSpeed=0,this.endSpeed=0,this.acceleration=null,this.startScale=1,this.endScale=1,this.minimumScaleMultiplier=1,this.startColor=null,this.endColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parentIsPC=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this.parent=e,t&&n&&this.init(t,n),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos},a=r.prototype={},s=new PIXI.Point;Object.defineProperty(a,"frequency",{get:function(){return this._frequency},set:function(e){"number"==typeof e&&e>0?this._frequency=e:this._frequency=1}}),Object.defineProperty(a,"particleConstructor",{get:function(){return this._particleConstructor},set:function(e){if(e!=this._particleConstructor){this._particleConstructor=e,this.cleanup();for(var t=this._poolFirst;t;t=t.next)t.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}}}),Object.defineProperty(a,"parent",{get:function(){return this._parent},set:function(e){this.cleanup(),this._parent=e,this._parentIsPC=o&&e&&e instanceof o}}),a.init=function(e,t){if(e&&t){this.cleanup(),this._origConfig=t,this._origArt=e,e=Array.isArray(e)?e.slice():[e];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(e):e,t.alpha?(this.startAlpha=t.alpha.start,this.endAlpha=t.alpha.end):this.startAlpha=this.endAlpha=1,t.speed?(this.startSpeed=t.speed.start,this.endSpeed=t.speed.end):this.startSpeed=this.endSpeed=0;var o=t.acceleration;o&&(o.x||o.y)?(this.endSpeed=this.startSpeed,this.acceleration=new PIXI.Point(o.x,o.y)):this.acceleration=null,t.scale?(this.startScale=t.scale.start,this.endScale=t.scale.end,this.minimumScaleMultiplier=t.scale.minimumScaleMultiplier||1):this.startScale=this.endScale=this.minimumScaleMultiplier=1,t.color&&(this.startColor=n.hexToRGB(t.color.start),t.color.start!=t.color.end?this.endColor=n.hexToRGB(t.color.end):this.endColor=null),t.startRotation?(this.minStartRotation=t.startRotation.min,this.maxStartRotation=t.startRotation.max):this.minStartRotation=this.maxStartRotation=0,t.rotationSpeed?(this.minRotationSpeed=t.rotationSpeed.min,this.maxRotationSpeed=t.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.minLifetime=t.lifetime.min,this.maxLifetime=t.lifetime.max,this.particleBlendMode=n.getBlendMode(t.blendMode),t.ease?this.customEase="function"==typeof t.ease?t.ease:n.generateEase(t.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(t.extraData):this.extraData=t.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0;var r;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var a=t.spawnRect;this.spawnRect=new PIXI.Rectangle(a.x,a.y,a.w,a.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,r=t.spawnCircle,this.spawnCircle=new PIXI.Circle(r.x,r.y,r.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,r=t.spawnCircle,this.spawnCircle=new PIXI.Circle(r.x,r.y,r.r),this.spawnCircle.minRadius=r.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particlesPerWave=t.particlesPerWave,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}this.frequency=t.frequency,this.emitterLifetime=t.emitterLifetime||-1,this.maxParticles=t.maxParticles>0?t.maxParticles:1e3,this.addAtBack=!!t.addAtBack,this.rotation=0,this.ownerPos=new PIXI.Point,this.spawnPos=new PIXI.Point(t.pos.x,t.pos.y),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=!0}},a.recycle=function(e){e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e==this._activeParticlesLast&&(this._activeParticlesLast=e.prev),e==this._activeParticlesFirst&&(this._activeParticlesFirst=e.next),e.prev=null,e.next=this._poolFirst,this._poolFirst=e,this._parentIsPC?(e.alpha=0,e.visible=!1):e.parent&&e.parent.removeChild(e),--this.particleCount},a.rotate=function(e){if(this.rotation!=e){var t=e-this.rotation;this.rotation=e,n.rotatePoint(t,this.spawnPos),this._posChanged=!0}},a.updateSpawnPos=function(e,t){this._posChanged=!0,this.spawnPos.x=e,this.spawnPos.y=t},a.updateOwnerPos=function(e,t){this._posChanged=!0,this.ownerPos.x=e,this.ownerPos.y=t},a.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(a,"emit",{get:function(){return this._emit},set:function(e){this._emit=!!e,this._emitterLife=this.emitterLifetime}}),a.update=function(e){var t,n,i;for(n=this._activeParticlesFirst;n;n=i)i=n.next,n.update(e);var o,r;this._prevPosIsValid&&(o=this._prevEmitterPos.x,r=this._prevEmitterPos.y);var a=this.ownerPos.x+this.spawnPos.x,s=this.ownerPos.y+this.spawnPos.y;if(this.emit)for(this._spawnTimer-=e;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var u;if(u=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<u){var l,c;if(this._prevPosIsValid&&this._posChanged){var h=1+this._spawnTimer/e;l=(a-o)*h+o,c=(s-r)*h+r}else l=a,c=s;t=0;for(var p=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);p>t;++t){var f;if(this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new this.particleConstructor(this),this.particleImages.length>1?f.applyArt(this.particleImages.random()):f.applyArt(this.particleImages[0]),f.startAlpha=this.startAlpha,f.endAlpha=this.endAlpha,f.startSpeed=this.startSpeed,f.endSpeed=this.endSpeed,f.acceleration=this.acceleration,1!=this.minimumScaleMultiplier){var d=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier;f.startScale=this.startScale*d,f.endScale=this.endScale*d}else f.startScale=this.startScale,f.endScale=this.endScale;if(f.startColor=this.startColor,f.endColor=this.endColor,this.minRotationSpeed==this.maxRotationSpeed?f.rotationSpeed=this.minRotationSpeed:f.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,f.maxLife=u,f.blendMode=this.particleBlendMode,f.ease=this.customEase,f.extraData=this.extraData,this._spawnFunc(f,l,c,t),f.init(),f.update(-this._spawnTimer),this._parentIsPC&&f.parent){var y=this._parent.children,m=y.indexOf(f);1>m?y.shift():m==y.length-1?y.pop():y.splice(m,1),this.addAtBack?y.unshift(f):y.push(f)}else this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f);this._activeParticlesLast?(this._activeParticlesLast.next=f,f.prev=this._activeParticlesLast,this._activeParticlesLast=f):this._activeParticlesLast=this._activeParticlesFirst=f,++this.particleCount}}this._spawnTimer+=this._frequency}}this._posChanged&&(this._prevEmitterPos.x=a,this._prevEmitterPos.y=s,this._prevPosIsValid=!0,this._posChanged=!1)},a._spawnPoint=function(e,t,n,i){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,e.position.x=t,e.position.y=n},a._spawnRect=function(e,t,i,o){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,s.x=Math.random()*this.spawnRect.width+this.spawnRect.x,s.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&n.rotatePoint(this.rotation,s),e.position.x=t+s.x,e.position.y=i+s.y},a._spawnCircle=function(e,t,i,o){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,s.x=Math.random()*this.spawnCircle.radius,s.y=0,n.rotatePoint(360*Math.random(),s),s.x+=this.spawnCircle.x,s.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,s),e.position.x=t+s.x,e.position.y=i+s.y},a._spawnRing=function(e,t,i,o){var r=this.spawnCircle;this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,r.minRadius==r.radius?s.x=Math.random()*(r.radius-r.minRadius)+r.minRadius:s.x=r.radius,s.y=0;var a=360*Math.random();e.rotation+=a,n.rotatePoint(a,s),s.x+=this.spawnCircle.x,s.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,s),e.position.x=t+s.x,e.position.y=i+s.y},a._spawnBurst=function(e,t,n,i){0===this.particleSpacing?e.rotation=360*Math.random():e.rotation=this.angleStart+this.particleSpacing*i+this.rotation,e.position.x=t,e.position.y=n},a.cleanup=function(){var e,t;for(e=this._activeParticlesFirst;e;e=t)t=e.next,this.recycle(e),e.parent&&e.parent.removeChild(e);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},a.destroy=function(){this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.endColor=this.customEase=null},e.Emitter=r}(cloudkid)}()},{}],35:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){o.off(e,i),t.apply(n,arguments)}var o=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,o=n.length;for(i;o>i;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],o=[];if(i&&t)for(var r=0,a=i.length;a>r;r++)i[r].fn!==t&&i[r].fn._!==t&&o.push(i[r]);return o.length?n[e]=o:delete n[e],this}},t.exports=i},{}],36:[function(e,t,n){(function(i){!function(e){if("object"==typeof n&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof i?i:"undefined"!=typeof self?self:this,o.Tweener=e()}}(function(){return function t(n,i,o){function r(s,u){if(!i[s]){if(!n[s]){var l="function"==typeof e&&e;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[s]={exports:{}};n[s][0].call(h.exports,function(e){var t=n[s][1][e];return r(t?t:e)},h,h.exports,t,n,i,o)}return i[s].exports}for(var a="function"==typeof e&&e,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){function i(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}t.exports=i},{}],2:[function(e,t,n){function i(e){var t=1.70158;return e*e*((t+1)*e-t)}t.exports=i},{}],3:[function(e,t,n){function i(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}t.exports=i},{}],4:[function(e,t,n){function i(e){return.5>e?.5*(1-o(1-2*e)):.5*o(2*e-1)+.5}var o=e("./bounce-out");t.exports=i},{"./bounce-out":6}],5:[function(e,t,n){function i(e){return 1-o(1-e)}var o=e("./bounce-out");t.exports=i},{"./bounce-out":6}],6:[function(e,t,n){function i(e){var t=4/11,n=8/11,i=.9,o=4356/361,r=35442/1805,a=16061/1805,s=e*e;return t>e?7.5625*s:n>e?9.075*s-9.9*e+3.4:i>e?o*s-r*e+a:10.8*e*e-20.52*e+10.72}t.exports=i},{}],7:[function(e,t,n){function i(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}t.exports=i},{}],8:[function(e,t,n){function i(e){return 1-Math.sqrt(1-e*e)}t.exports=i},{}],9:[function(e,t,n){function i(e){return Math.sqrt(1- --e*e)}t.exports=i},{}],10:[function(e,t,n){function i(e){return.5>e?4*e*e*e:.5*Math.pow(2*e-2,3)+1}t.exports=i},{}],11:[function(e,t,n){function i(e){return e*e*e}t.exports=i},{}],12:[function(e,t,n){function i(e){var t=e-1;return t*t*t+1}t.exports=i},{}],13:[function(e,t,n){function i(e){return.5>e?.5*Math.sin(13*Math.PI/2*2*e)*Math.pow(2,10*(2*e-1)):.5*Math.sin(-13*Math.PI/2*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+1}t.exports=i},{}],14:[function(e,t,n){function i(e){return Math.sin(13*e*Math.PI/2)*Math.pow(2,10*(e-1))}t.exports=i},{}],15:[function(e,t,n){function i(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}t.exports=i},{}],16:[function(e,t,n){function i(e){return 0===e||1===e?e:.5>e?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,10-20*e)+1}t.exports=i},{}],17:[function(e,t,n){function i(e){return 0===e?e:Math.pow(2,10*(e-1))}t.exports=i},{}],18:[function(e,t,n){function i(e){return 1===e?e:1-Math.pow(2,-10*e)}t.exports=i},{}],19:[function(e,t,n){t.exports={backInOut:e("./back-in-out"),backIn:e("./back-in"),backOut:e("./back-out"),bounceInOut:e("./bounce-in-out"),bounceIn:e("./bounce-in"),bounceOut:e("./bounce-out"),circInOut:e("./circ-in-out"),circIn:e("./circ-in"),circOut:e("./circ-out"),cubicInOut:e("./cubic-in-out"),cubicIn:e("./cubic-in"),cubicOut:e("./cubic-out"),elasticInOut:e("./elastic-in-out"),elasticIn:e("./elastic-in"),elasticOut:e("./elastic-out"),expoInOut:e("./expo-in-out"),expoIn:e("./expo-in"),expoOut:e("./expo-out"),linear:e("./linear"),quadInOut:e("./quad-in-out"),quadIn:e("./quad-in"),quadOut:e("./quad-out"),quartInOut:e("./quart-in-out"),quartIn:e("./quart-in"),quartOut:e("./quart-out"),quintInOut:e("./quint-in-out"),quintIn:e("./quint-in"),quintOut:e("./quint-out"),sineInOut:e("./sine-in-out"),sineIn:e("./sine-in"),sineOut:e("./sine-out")}},{"./back-in":2,"./back-in-out":1,"./back-out":3,"./bounce-in":5,"./bounce-in-out":4,"./bounce-out":6,"./circ-in":8,"./circ-in-out":7,"./circ-out":9,"./cubic-in":11,"./cubic-in-out":10,"./cubic-out":12,"./elastic-in":14,"./elastic-in-out":13,"./elastic-out":15,"./expo-in":17,"./expo-in-out":16,"./expo-out":18,"./linear":20,"./quad-in":22,"./quad-in-out":21,"./quad-out":23,"./quart-in":25,"./quart-in-out":24,"./quart-out":26,"./quint-in":28,"./quint-in-out":27,"./quint-out":29,"./sine-in":31,"./sine-in-out":30,"./sine-out":32}],20:[function(e,t,n){function i(e){return e}t.exports=i},{}],21:[function(e,t,n){function i(e){return e/=.5,1>e?.5*e*e:(e--,-.5*(e*(e-2)-1))}t.exports=i},{}],22:[function(e,t,n){function i(e){return e*e}t.exports=i},{}],23:[function(e,t,n){function i(e){return-e*(e-2)}t.exports=i},{}],24:[function(e,t,n){function i(e){return.5>e?8*Math.pow(e,4):-8*Math.pow(e-1,4)+1}t.exports=i},{}],25:[function(e,t,n){function i(e){return Math.pow(e,4)}t.exports=i},{}],26:[function(e,t,n){function i(e){return Math.pow(e-1,3)*(1-e)+1}t.exports=i},{}],27:[function(e,t,n){function i(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}t.exports=i},{}],28:[function(e,t,n){function i(e){return e*e*e*e*e}t.exports=i},{}],29:[function(e,t,n){function i(e){return--e*e*e*e*e+1}t.exports=i},{}],30:[function(e,t,n){function i(e){return-.5*(Math.cos(Math.PI*e)-1)}t.exports=i},{}],31:[function(e,t,n){function i(e){var t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}t.exports=i},{}],32:[function(e,t,n){function i(e){return Math.sin(e*Math.PI/2)}t.exports=i},{}],33:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("eases"),a=0,s=1,u=2,l=3,c=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],o=arguments.length<=2||void 0===arguments[2]?"":arguments[2];i(this,e),this.name=o,this.debug=n,this.obj=t,this.position=0,this.duration=0,this.state=0,this.next=null,this.prev=null,this.last=this,this.time=0,this.lastEvaluationTime=-1,this.propertiesFrom=null,this.propertiesTo=null,this.ease=r.linear,this.onStart=null,this.onComplete=null,this.debug&&this.log("created")}return o(e,[{key:"_getTween",value:function(t,n,i){var o=arguments.length<=3||void 0===arguments[3]?"":arguments[3],r=this.last,a=new e(t,this.debug,o);return a.position=r.position+r.duration,a.duration=n||0,a.state=0,a.ease=i,a.prev=r,r.next=a,this.last=a,this.debug&&this.log("added: "+o),a}},{key:"_getLastParam",value:function(e){for(var t=this.last.prev;t&&(t.obj!==this.obj||!t.propertiesTo||void 0===t.propertiesTo[e]||null===t.propertiesTo[e]);)t=t.prev;var n=t?t.propertiesTo[e]:this.obj[e];return n}},{key:"add",value:function(e){var t=this._getTween(e,0,r.linear);return t}},{key:"from",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?r.linear:arguments[2],i=this._getTween(this.obj,t,n,"from");i.propertiesFrom=e,i.propertiesTo={};for(var o in e)i.propertiesTo[o]=this._getLastParam(o);return this}},{key:"to",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?r.linear:arguments[2],i=this._getTween(this.obj,t,n,"to");i.propertiesTo=e,i.propertiesFrom={};for(var o in e)i.propertiesFrom[o]=this._getLastParam(o);return this}},{key:"wait",value:function(e){var t=this._getTween(this.obj,e,null,"wait");return t.propertiesFrom=t.prev.propertiesFrom,t.propertiesTo=t.prev.propertiesTo,this}},{key:"then",value:function(e){return this.last.onComplete=e,this}},{key:"setTime",value:function(e){var t=e-this.time;this.update(t)}},{key:"getTime",value:function(){return this.time}},{key:"update",value:function(t){if(t&&(this.time+=t),this.next&&0>t&&this.next.update(t),this.time!==this.lastEvaluationTime){var n=this.time,i=this.position,o=this.duration,r=this.state,c=e.getState(i,o,n);if(r===a)if(n>this.lastEvaluationTime)switch(c){case u:this.notifyStart(),this.process(n-i);break;case l:this.notifyStart(),this.process(o),this.notifyComplete()}else switch(c){case u:this.notifyComplete(),this.process(n-i);break;case s:this.notifyComplete(),this.process(0),this.notifyStart()}else switch(c){case s:r!==s&&(this.process(0),this.notifyStart());break;case u:r===s?this.notifyStart():r===l&&this.notifyComplete(),this.process(n-i);break;case l:r!==l&&(this.process(o),this.notifyComplete())}this.lastEvaluationTime=n,this.state=c}this.next&&t>0&&this.next.update(t)}},{key:"process",value:function(e){if(this.ease&&0!==this.duration){var t=this.ease(e/this.duration);for(var n in this.propertiesTo)switch(t){case 0:this.obj[n]=this.propertiesFrom[n];break;case 1:this.obj[n]=this.propertiesTo[n];break;default:var i=this.propertiesFrom[n],o=this.propertiesTo[n];this.obj[n]=i+(o-i)*t}}}},{key:"notifyStart",value:function(){this.debug&&this.log("start"),this.onStart&&this.onStart()}},{key:"notifyComplete",value:function(){this.debug&&this.log("complete"),this.onComplete&&this.onComplete()}},{key:"finished",value:function(){var e=this.state===l;return e&&this.next&&(e=this.next.finished()),e}},{key:"dispose",value:function(){this.next&&this.next.dispose(),this.debug&&this.log("DISPOSED!"),this.obj=null,this.next=null,this.prev=null,this.last=null,this.propertiesFrom=null,this.propertiesTo=null,this.onStart=null,this.onComplete=null}},{key:"log",value:function(e){this.debug&&(this.obj.name?console.log("[Tween]",this.obj.name,this.name,e):this.name?console.log("[Tween]",this.name,e):console.log("[Tween]",e))}}],[{key:"getState",value:function(e,t,n){var i=e+t,o=a;return o=e>n?s:n>=i?l:u}}]),e}();n["default"]=c,c.UNDEFINED=a,c.BEFORE=s,c.RUNNING=u,c.AFTER=l,t.exports=n["default"]},{eases:19}],34:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./Tween"),s=i(a),u=e("eases"),l=i(u),c=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];o(this,e),this.debug=!1,this.tweens=[],this._autoUpdateRate=0,this._interval=null,this.autoUpdateRate=t}return r(e,[{key:"dispose",value:function(){clearInterval(this._interval),this.autoUpdateRate=0;for(var e=this.tweens.length;e--;){var t=this.tweens[e];t&&t.dispose()}this.tweens=null}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=new s["default"](e,t,n);return this.tweens.push(i),i}},{key:"remove",value:function(e){for(var t=this.tweens.length;t--;){var n=this.tweens[t];n.obj===e&&(this.tweens.splice(t,1),n.dispose())}}},{key:"update",value:function(e){for(var t=this.tweens.length;t--;){var n=this.tweens[t];n&&(n.finished()?(this.tweens.splice(t,1),n.dispose()):n.update(e))}}},{key:"getTime",value:function(){return(new Date).getTime()/1e3}},{key:"autoUpdateRate",get:function(){return this._autoUpdateRate},set:function(e){if(clearInterval(this._interval),0>=e)this._interval=null,this._autoUpdateRate=0;else{this._autoUpdateRate=e;var t=this,n=t.getTime();t._interval=setInterval(function(){var e=t.getTime(),i=e-n;n=e,t.update(i)},1e3*e)}}}]),e}();n["default"]=c,c.Tween=s["default"],c.ease=l["default"],t.exports=n["default"]},{"./Tween":33,eases:19}],35:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=e("./Tweener"),r=i(o);"object"==typeof window&&(window.Tweener=r["default"]),t.exports=r["default"]},{"./Tweener":34}]},{},[35])(35)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[21]);